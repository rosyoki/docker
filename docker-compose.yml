version: '2'
services:
  app-tomcat:
    environment:
      - "TZ=Japan"
    build: ./tomcat
    volumes:
      - ../docker_tmp/SampleSpringApp.war:/usr/local/tomcat/webapps/SampleSpringApp.war
    ports:
      - "8081:8080"
    links:
      - mysql

  mysql:
    build: ./mysql/
    volumes:
      - ../docker_tmp/mysql/mysql_data:/var/lib/mysql
      - ./mysql/sqls:/docker-entrypoint-initdb.d
    ports:
      - "53306:3306"
    environment:
            - "TZ=Japan"
            - MYSQL_DATABASE=blog_db
            - MYSQL_USER=sboot
            - MYSQL_PASSWORD=sboot
            - MYSQL_ROOT_PASSWORD=root
  phpmyadmin:
    image: phpmyadmin/phpmyadmin
    environment:
      - PMA_ARBITRARY=1
      - PMA_HOST=mysql
      - PMA_USER=root
      - PMA_PASSWORD=root
    links:
      - mysql
    ports:
      - 1111:80
    volumes:
      - /session
